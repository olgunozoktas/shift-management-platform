import"./bootstrap.32611946.js";import{c as S,j as t,r as i,a as n,F as w,I as k}from"./jsx-runtime.5cafaefb.js";import{n as g,a as A}from"./Notification.c6a390b7.js";import{P as C}from"./pagination.8026c58a.js";function F(){var h;const[d,y]=i.exports.useState([]),[l,c]=i.exports.useState([]),[x,m]=i.exports.useState(null);i.exports.useEffect(()=>{b()},[]);function b(){axios.get("/my-companies").then(e=>{y(e.data),p(e.data[0].id),m(e.data[0].id)}).catch(e=>{console.log(e)})}function p(e){axios.get("/available-shifts/"+e).then(a=>{c(a.data)}).catch(a=>{console.log(a)})}function f(e=null){e!=null&&axios.get(e).then(a=>{c(a.data)}).catch(a=>{console.log(a)})}const N=e=>{m(e),p(e)},v=e=>{const a=[...l.data],r=a.findIndex(s=>s.id===e);if(a[r].submitted===!0){g("Application is still processing...");return}a[r].submitted=!0;const o=l;o.data=a,c(o),confirm("Do you want to apply to this shift?")&&axios.post("/available-shifts/"+e+"/apply").then(s=>{s.data.status==="success"?(A(s.data.message),p(x)):g(s.data.message),a[r].submitted=!1,o.data=a,c(o)}).catch(s=>{console.log(s),a[r].submitted=!1,o.data=a,c(o)})};return n(w,{children:[t(k,{position:"top-right",reverseOrder:!1,gutter:8,containerClassName:"",containerStyle:{}}),n("section",{className:"relative overflow-x-auto mt-4",children:[d.length>0?n("div",{className:"flex flex-col gap-2 w-max",children:[t("label",{htmlFor:"company",children:"Select Company To List Available Shifts"}),t("select",{name:"company",id:"company",onChange:e=>N(e.target.value),className:"rounded-lg cursor-pointer",children:d.map(e=>t("option",{value:e.id,children:e.name},e.id))})]}):null,n("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400 mt-6 shadow-md sm:rounded-lg",id:"table",children:[t("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:n("tr",{className:"text-center bg-gray-100",children:[t("th",{scope:"col",className:"px-6 py-3",children:"Job Role"}),t("th",{scope:"col",className:"px-6 py-3",children:"Type"}),t("th",{scope:"col",className:"px-6 py-3",children:"Date"}),t("th",{scope:"col",className:"px-6 py-3",children:"Description"}),t("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),t("tbody",{children:((h=l==null?void 0:l.data)==null?void 0:h.length)>0?l.data.map(e=>{var a;return n("tr",{className:"text-center bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[t("th",{scope:"row",className:"w-1/4 px-6 py-4 font-medium text-gray-900 dark:text-white",children:e.job_role}),t("td",{className:"py-2",children:e.type}),t("td",{className:"py-2",children:e.date_time}),t("td",{className:"py-2",children:(a=e.text)!=null?a:"-"}),t("td",{className:"flex flex-row items-center justify-center gap-2 py-2",children:t("button",{onClick:()=>v(e.id),className:"py-2 px-4 bg-blue-500 hover:bg-blue-600 text-white font-bold rounded-lg",children:"Apply"})})]},e.id)}):t("tr",{className:"text-center bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:t("td",{colSpan:"5",className:"py-4",children:"No Available Shifts Found For Selected Company"})})})]}),t(C,{data:l,clickHandler:f})]})]})}let u=document.getElementById("available-shifts");u&&S(u).render(t(F,{}));
